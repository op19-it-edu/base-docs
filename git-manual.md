# Git 操作

## 1. リモートリポジトリからクローンして、そのリポジトリに移動

`git clone` でリモートリポジトリ（GitHub）をクローンする
```bash
$ git clone [GitHubからコピーしてきたURL]
```
ex
```bash
$ git clone git@github.com:op19-it-edu/base-docs.git
```

クローンしてきたリポジトリに移動する
```bash
$ cd [リポジトリ名]
```
ex
```bash
$ cd base-docs
```

---

## 2. ブランチを切る
```bash
$ git checkout -b [作りたいブランチ名] [起点になるブランチ] 
```
ex
```bash
$ git checkout -b add_api-document origin/master
```

---

## 3. ブランチの確認
以下のコマンドで、今いるブランチを確認する
```bash
$ git branch
```

リモートブランチも含めて表示させるときは
```bash
$ git branch -a
```

上流ブランチを表示させるときは
```bash
$ git branch -vv
```
---

## 4. 編集する
- 今いるブランチを確認したら、エディターを使って編集する
  - `VScode` とか `Atom` とか `Vim` とか

---

## 5. ローカルブランチの変更をステージング＆コミットする
`git add` でコミットする内容を選択する

```bash
$ git add [コミットしたいファイルなど]
```
ex
```bash
$ git add README.md
```

`git commit` でコミットする
```bash
$ git commit -m [コミット名]
```
ex
```bash
$ git commit -m "Modify README"
```

### 誤ってコミットしまったら...

変更はそのままで、コミットだけ取り消す
```bash
$ git reset -soft　HEAD^
```

変更もコミットも取り消す
```bash
$ git reset -hard HEAD^
```

---

## 6. ローカルブランチをリモート（GitHub）に反映させる
`git push`でローカルブランチをリモートブランチに反映させる

```bash
$ git push -u origin [作成するリモートブランチ名]
```
ex
```bash
$ git push -u origin add_api-document
```

---

## 7. 作成したリモートブランチをmasterブランチにマージするためにプルリクエストを作成する

- プルリクエストの作成を選択
- ターゲットブランチにmasterを選択
- 自分以外の残り二人をassignee（レビュアー）にセットして送信する

---

## 8. アサインされた人がレビューしてマージを決定する

- アサインされた人はレビューして問題なかったらマージをする
- もし編集が必要ならリクエスト内のディスカッションでそこを指摘する

---

## 9. ディスカッションで指摘があった場合

- またエディターを使って編集する
- 編集点をgit add & commitする
- リモートブランチへプッシュする

---

## 10. 再レビュー
- 新しいコミットをもとに再びレビューをする
- 納得するまで9~10を繰り返す

---

# Git操作のポイント

## ブランチについて
- **トピックブランチ** の考え方を徹底する
  - １つのイシューに対して１つのブランチを作成する
  - 例
    - イシュー：APIドキュメントを作成する
    - ブランチ：add_api-documnent
- イシューから外れる変更はしない
  - 別の部分を変更したくなったら別のブランチを作成する

---

## コミットについて
- 変更の区切りがいいところでコミットをする
  - 粒度を揃えることを心がける
- 他の人が見て変更の内容がわかりやすいコミットメッセージを心がける

---

## プッシュについて
  - リモートに同名のブランチ（名前を変えてもok）を作成しプッシュする
    - リモートのmasterに直接プッシュするのはNG
      - レビューができない
      - 破壊的な変更がmasterに反映される可能性あり

---

